---
simulation_campaign: tests/data/tmp/simulation_campaign_02.yaml
output: analysis_02_bluecv
extraction:
  neuron_classes:
    L3_EXC: { layer: [ 3 ], synapse_class: [ EXC ] }
    L4_EXC: { layer: [ 4 ], synapse_class: [ EXC ] }
    L3_INH: { layer: [ 3 ], synapse_class: [ INH ] }
    L4_INH: { layer: [ 4 ], synapse_class: [ INH ] }
  limit: null
  target: hex0
  windows:
    w1: { bounds: [ 3800, 4000 ] }
    w2: { bounds: [ 4800, 5000 ] }
    w3: { bounds: [ 5800, 6000 ] }
    w4: { bounds: [ 4000, 4200 ] }
    w5: { bounds: [ 5000, 5200 ] }
    w6: { bounds: [ 6000, 6200 ] }
analysis:
  features:
    - type: single
      name: by_gid
      groupby: [ simulation_id, circuit_id, neuron_class, window, gid ]
      function: blueetl.external.bluecv.gid.calculate_features_by_gid
      params:
        MFR: { }
        latency: { }
        ISI: { }
        CV: { }
        spike_count: { }
    - type: single
      name: by_neuron_class
      groupby: [ simulation_id, circuit_id, neuron_class, window ]
      function: blueetl.external.bluecv.neuron_class.calculate_features_by_neuron_class
      params:
        PSTH: { params: { bin_size: 10 } }
        PSD: { }
    - type: comparison  # not implemented
      function: blueetl.external.bluecv.comparison.calculate_comparison_features
      params:
        VR: { }
        VP: { }
